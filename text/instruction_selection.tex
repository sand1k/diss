\documentclass{article}

\usepackage{amsmath,amsthm,amssymb}
\usepackage{mathtext}
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{hyperref}


\begin{document}
LLVM codegen

-view-dag-combine1-dags   – before DAG combine 1
-view-legalize-types-dags – before legalize type
-view-dag-combine-lt-dags – after legalize type 2 and before DAG combine
-view-legalize-dags       – before legalization
-view-dag-combine2-dags   – before DAG combine 2
-view-isel-dags           – before instruction selection
-view-sched-dags          – after instruction selection and before scheduling

llc -help-hidden|grep dags
  -view-dag-combine-lt-dags                      - Pop up a window to show dags before the post legalize types dag combine pass
  -view-dag-combine1-dags                        - Pop up a window to show dags before the first dag combine pass
  -view-dag-combine2-dags                        - Pop up a window to show dags before the second dag combine pass
  -view-isel-dags                                - Pop up a window to show isel dags as they are selected
  -view-legalize-dags                            - Pop up a window to show dags before legalize
  -view-legalize-types-dags                      - Pop up a window to show dags before legalize types
  -view-misched-dags                             - Pop up a window to show MISched dags after they are processed
  -view-sched-dags                               - Pop up a window to show sched dags as they are processed
  -view-sunit-dags                               - Pop up a window to show SUnit dags after they are processed

InstrEmitter.h - emits Machine Instrs from DAG.


Выбор инструкций

Существуют два подхода: основанный на паттерн матчинге и технике оптмизаций локальных регионов.

Currently in LLVM: LLVM IR -> DAGISel -> MachineInstr:
Works on BB level.
Pipeline:
- Build SelectionDAG
- DAG Combine
- Legalize types
- More DAG combine
- Legalize vectors
- Legalize types
- More DAG combine
- Legalize (operations)
- More DAG combine
- Select instructions
- Schedule instructions
- Emit MachineInstr

LLVM IR -> FastISel -> MachineInstr
Works on BB level.

LLVM IR -> GlobalISel
Access to whole functions
MachineInstr
+ Register banks
+ Generic instructions
MachineInstr => Machine Passes
Pipeline:
- LLVM IR
- IRTranslator (custom Machine IR)
- Legalizer
- RegBankSelect
- InstructionSelect
- MachineInstr


Links:
\href{https://www.youtube.com/watch?v=d6dF6E4BPeU}{FOSDEM 2017 - GLobalISel}

	\begin{thebibliography}
		{9}\bibitem{lamport94} Leslie Lamport, \emph{\LaTeX: a document preparation system}. Addison Wesley, Massachusetts, 2nd edition, 1994.
		{10}\bibitem{lifeinst} Eli Bendersky, \emph{\href{https://eli.thegreenplace.net/2012/11/24/life-of-an-instruction-in-llvm/}{Life of an instruction in LLVM}}.
	\end{thebibliography}

\end{document}
